# Седмица 3 - Работа с файлове (текстови)

Този проект разширява `Smart City` приложението от Седмици 1-2 чрез добавяне на функционалност за работа с текстови файлове за събития (Event), включително сериализация, десериализация и търсене по различни критерии.

## Структура на проекта

Нужни са следните модификации на проекта:
- `smartcity.hpp` - **РАЗШИРЕН** с декларации на функции за файлови операции и търсене на събития
- `smartcity.cpp` - **РАЗШИРЕН** с имплементации на новите функции
- `main.cpp` - **МОДИФИЦИРАН** - Главна демонстрационна програма

## Стъпки за имплементация

Преди да имплементирате, погледнете [важните забележки](#важни-забележки) по-долу.

### 1. Разширение на smartcity.hpp/cpp

Към структурите и функциите от седмица 2 добавяме:

1. Функции за сериализация/десериализация на едно събитие:
   - `saveEventToFile` / `loadEventFromFile` - За единични събития

2. Функции за търсене на събития:
   - `searchEventsByLevel` - Търсене по ниво на спешност
   - `searchEventsByDescription` - Търсене по описание
   - `searchEventsByLocation` - Търсене по местоположение. Търсенето се извършва в радиус около дадена точка.
   - `searchEventsInFile` - Обща функция за търсене по различни критерии. За да я реализирате ще трябва да инжектирате подходящо dependеncy, например чрез нов изброен тип `SearchCriteria` или чрез низове за критерии и параметри.

3. Помощни функции:
   - `calculateDistance` - Изчисляване на разстояние между две точки ***(ще ви трябва подобна за търсене по местоположение)***
   - `containsSubstring` - Проверка за съдържане на подниз ***(помощна за търсене по описание)***

4. Запазване и зареждане на множество събития:
   - `saveEventsToFile` / `loadEventsFromFile` - За множество събития (ще се подава масив от събития с **ПРОИЗВОЛНА** дължина)

### 2. Примерен формат на файловете

Събитията се съхраняват в текстови файлове, ето примерен формат:

За единично събитие:
```
DESCRIPTION=Пожарна аларма в центъра
LEVEL=2
LOCATION_X=15
LOCATION_Y=25
```

За множество събития:
```
EVENT_COUNT=3

[EVENT_0]
DESCRIPTION=Пожарна аларма в центъра
LEVEL=2
LOCATION_X=15
LOCATION_Y=25

[EVENT_1]
DESCRIPTION=Наводнение в южния квартал
LEVEL=1
LOCATION_X=30
LOCATION_Y=40

[EVENT_2]
...
```

## Пример за използване (съдържа примерни прототипи на функции и изпозването им, отворете, ако не се сещате как би станало)
<details>

<summary>Примери:</summary>

```cpp
// Запазване на събитие
Event myEvent;
inputEventData(myEvent);
saveEventToFile(myEvent, "event.txt");

// Зареждане на събитие
Event loadedEvent;
if (loadEventFromFile(loadedEvent, "event.txt")) {
    printEventInfo(loadedEvent);
}

// Търсене по ниво на спешност
Event results[10];
EmergencyLevel level = HIGH;
int found = searchEventsInFile("events.txt", BY_LEVEL, &level, results, 10);

// Търсене по описание
char searchText[] = "fire";
found = searchEventsInFile("events.txt", BY_DESCRIPTION, searchText, results, 10);

// Търсене по местоположение
int searchParams[3] = {10, 20, 5}; // x, y, радиус
found = searchEventsInFile("events.txt", BY_LOCATION, searchParams, results, 10);
```

</details>

## Важни забележки и препоръки

1. При работа с файлове:
   - Винаги проверявайте дали файлът съществува преди да го отворите за четене
   - Винаги проверявайте дали файлът е отворен успешно
   - Затваряйте файловете след операции (фунцкия, отваряща файл, трябва да се грижи и за затварянето му)
   - Обработвайте потенциални грешки при четене/запис
   - Не правете функциите от тип `void`, а връщайте стойност за успешно/неуспешно изпълнение

2. При търсене:
   - Търсенето по описание е нечувствително към малки/големи букви
   - Търсенето по местоположение използва Евклидово разстояние
   - Функциите за търсене връщат брой намерени съвпадения

## Възможни разширения

- Добавяне на индексиране за по-бързо търсене
- Разширение на критериите за търсене (комбинирано търсене)
- Добавяне на механизъм за валидация на данните при четене от файл