# Седмица 12: Подготовка за тест

## Задача: Система за управление на библиотека

За тази задача ще реализирате опростена система за управление на библиотека, която демонстрира следните концепции:
- Семантика на собственост (move semantics, copy constructors и т.н.)
- Предефиниране на оператори (различни видове)
- Работа с двоични файлове
- Основно наследяване

### Изисквания

#### 1. Йерархия на класовете за медия
Създайте основна йерархия за библиотечни медии:

- Създайте базов клас `Media` със:
  - Частни полета за:
    - `char* title` (динамично заделена памет)
    - `unsigned int id`
    - `bool available`
    - `Collection* owner` (указател към съдържащата колекция)
  - Подходящи конструктори, копиращ конструктор, конструктор за преместване, деструктор
  - Виртуален метод `print()` за извеждане на информация за медията
  - Методи `setOwner(Collection* newOwner)` и `getOwner()` за работа с указателя към колекцията

- Създайте производни класове:
  - `Book` (наследява `Media` с допълнителни полета `char* author` и `unsigned int pages`)
  - `Journal` (наследява `Media` с допълнителни полета `char* publisher` и `unsigned int issue`)

#### 2. Клас `Collection`
Реализирайте клас `Collection` за съхранение на масив от указатели към `Media`:

- Частни членове:
  - `Media** items` (динамичен масив от указатели)
  - `size_t capacity`
  - `size_t size`

- Реализирайте следните методи:
  - Конструктори (по подразбиране, с капацитет)
  - Копиращ конструктор и оператор за присвояване
  - Конструктор за преместване и оператор за преместващо присвояване
  - Деструктор
  - `add(Media* item)` - добавя медия към колекцията и задава колекцията като собственик на медията
  - `remove(unsigned int id)` - премахва медия от колекцията и премахва указателя към собственик

#### 3. Предефиниране на оператори
Реализирайте следните оператори:

За класовете `Media`:
- Оператор `==` за сравняване на две медии по id
- Оператори за потоци (`<<` и `>>`) за конзолен вход/изход

За класа `Collection`:
- Оператор `[]` (както константна, така и неконстантна версии) за достъп до медии по индекс
- Оператор `()`, който приема низ и връща първата медия със съвпадащо заглавие
- Оператор `bool` за проверка дали колекцията не е празна
- Оператор `!` за проверка дали колекцията е празна
- Префиксен и постфиксен оператор `++`, които увеличават ID на всички медии в колекцията

Извън всеки клас, реализирайте:
- Бинарен оператор `+` за обединяване на две колекции

#### 4. Работа с двоични файлове
Реализирайте методи за:
- `void Collection::saveToFile(const char* filename)` - записва всички данни от колекцията в двоичен файл
- `void Collection::loadFromFile(const char* filename)` - зарежда данни за колекцията от двоичен файл

### Ограничения
- НЕ използвайте никакви контейнери от стандартната библиотека (vector, string и т.н.)
- Реализирайте правилно управление на паметта (без изтичане на памет)
- Всички низоподобни данни трябва да използват масиви от символи с динамично заделяне на памет
- Осигурете правилна const-коректност
- Медийните обекти НЕ се притежават от колекцията, а имат само указател към нея

### Тестване
Създайте файл `main.cpp`, който:
1. Създава няколко книги и списания
2. Добавя ги към колекции
3. Демонстрира връзката между медии и техните колекции-собственици
4. Демонстрира всички реализирани оператори
5. Записва колекцията в двоичен файл и я зарежда отново
6. Проверява дали заредените данни съвпадат с оригиналните

### Критерии за оценяване
- Правилна реализация на семантиката на собственост
- Правилно предефиниране на оператори
- Правилна работа с двоични файлове
- Правилна реализация на наследяване
- Управление на паметта (без изтичане)
- Организация и яснота на кода